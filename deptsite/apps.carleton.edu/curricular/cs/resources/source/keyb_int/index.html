<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="/reason_package/jquery/jquery_latest.js"></script>
<link rel="stylesheet" type="text/css" href="/global_stock/nav/nav.css" />
<title>Carleton College: Computer Science: Linux Keyboard Interrupts for Pascal, C, and C++</title>
<link rel="stylesheet" type="text/css" href="/reason_package/reason_4.0/www/css/modules.css" />
<link rel="stylesheet" type="text/css" href="/global_stock/css/default_styles.css" />
<link rel="stylesheet" type="text/css" href="/global_stock/css/dept_styles_new.css" />
<link rel="stylesheet" type="text/css" href="/global_stock/css/mathcs_subsites.css" />
<link rel="stylesheet" type="text/css" href="/curricular/cs/assets/stylesheet.css" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="shortcut icon" href="/favicon.ico" />
<meta name="description" content="Example program of an Linux keyboard interrupt, along with descriptions of functions to use and usefil tips for C, C++, and Pascal." />
<script type="text/javascript" src="/global_stock/js/site_search_form.js"></script>
</head>
<body class="fullGraphics crumbs"><div class="hide"><a href="#content" class="hide">Skip Navigation</a></div>


<p class="hide"><a href="?textonly=1"><span class="textOnly">Text Only/<span class="tiny"> </span>Printer-Friendly</span></a></p>


<a name="top"></a><div id="carlNavWrap" class="standard">
<div id="carlNav">
<h1 id="carlHome"><a href="//www.carleton.edu/" title="Carleton College Home"><span></span>Carleton College</a></h1>
<div class="searchWrap">
<div id="combinedSearch">
<div class="finders"><ul><li class="az"><a href="/az/" title="Alphabetical site list">A-Z Guide</a></li><li class="dir"><a href="//www.carleton.edu/campus/directory/" title="Faculty, Staff, &amp; Student Directory">Directory</a></li></ul></div>
<form action="/search/" method="get">
<div class="elements">
<label for="combinedSearchInput" id="combinedSearchInputLabel"><span class="rep"></span>Search<span class="xtr"> people and pages</span></label>
<input type="text" id="combinedSearchInput" name="keyword" size="14" class="input" />
<input type="submit" id="combinedSearchSubmit" value="go" class="submit" />
</div>
</form>
</div>
</div>
<div id="carlTabs">
<div id="carlTopics"><ul><li class="home"><a href="//www.carleton.edu/" title="Carleton College home page"><img src="/global_stock/nav/img/home.gif" alt="Home" /></a></li><li class="acad sel"><a href="/academics/" title="Departments, programs, &amp; majors"><img src="/global_stock/nav/img/acad_sel.gif" alt="Academics" /></a></li><li class="life"><a href="/life/" title="Arts, athletics, organizations, and more"><img src="/global_stock/nav/img/life.gif" alt="Campus Life" /></a></li></ul></div><div id="carlAudiences"><ul><li class="prosp"><a href="/admissions/" title="Admissions &amp; other information for prospective students"><img src="/global_stock/nav/img/prosp.gif" alt="Prospective Students" /></a></li><li class="alum"><a href="/alumni/" title="Alumni Gateway"><img src="/global_stock/nav/img/alum.gif" alt="Alumni" /></a></li><li class="facs"><a href="/campus/" title="Faculty/Staff Gateway"><img src="/global_stock/nav/img/facs.gif" alt="Faculty &amp; Staff" /></a></li><li class="stud"><a href="/student/" title="Student Gateway"><img src="/global_stock/nav/img/stud.gif" alt="Students" /></a></li><li class="fam"><a href="/parents/" title="Parent &amp; Family Gateway"><img src="/global_stock/nav/img/fam.gif" alt="Families" /></a></li></ul></div>
</div>
</div>
</div>
<div id="wrapper" class="fullGraphicsView">
<div id="breadcrumbs" class="locationBarText">You are here: <a href='http://www.carleton.edu/curricular/index.html' class='locationBarLinks'>Academic Departments</a> &gt; <a href="/curricular/cs/" class="locationBarLinks">Computer Science</a> &gt; <a href="/curricular/cs/resources/" class="locationBarLinks">Resources</a> &gt; <a href="/curricular/cs/resources/source/" class="locationBarLinks">Programming Resources and Tools</a> &gt; Keyboard Interrupts</div>
<div class="bannerAndMeat fullGraphics">
<div class="banner">
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="bannerTable" summary="The Site Name">
<tr>
<td class="bannerCol1">
<div class="bannerInfo">
<h1 class="siteName"><a href="/curricular/cs/" class="siteLink"><span>Computer Science</span></a></h1>
</div>
</td>
<td class="bannerCol2">
<div class="bannerXtra">

<form method="post" action="http://search.carleton.edu/search.php" name="search" class="searchForm">
<input type="text" name="words" size="23" value="Search Computer Science" onfocus='if(this.value=="Search Computer Science") {this.value="";}' onblur='if(this.value=="") {this.value="Search Computer Science";}' class="searchInputBox" id="minisiteSearchInput" />
<a href="javascript:document.search.submit()" class="searchSubmitLink">Go</a>
<noscript><input name="go" type="submit" value="go" /></noscript>
<input type="hidden" name="restrict" value="http://apps.carleton.edu/curricular/cs/" />
<input type="hidden" name="method" value="and" /><input type="hidden" name="format" value="builtin-long" /><input type="hidden" name="sort" value="score" /><input type="hidden" name="matchesperpage" value="10" /><input type="hidden" name="config" value="htdig" /><input type="hidden" name="exclude" value="" />
</form>

</div>
</td>
</tr>
</table>
</div>
<div class="layout">
<table border="0" cellspacing="0" cellpadding="0" class="layoutTable" summary="The Main Content of Page">
<tr>
<td valign="top" class="navigationTD">
<div class="navigation">


<div id="minisiteNavigation"><div class="list"><ul class="navListTop"><li class="navListItem open"><a href="/curricular/cs/" class="home"><span>Computer Science Home</span></a><ul class="navList"><li class="navListItem closed"><a href="/curricular/cs/overview/">Overview</a></li><li class="navListItem closed item1"><a href="/curricular/cs/faculty/">Faculty &amp; Staff</a></li><li class="navListItem closed item2"><a href="/curricular/cs/courses/">Courses</a></li><li class="navListItem closed item3"><a href="/curricular/cs/major/">The Major</a></li><li class="navListItem open item4"><a href="/curricular/cs/resources/">Resources</a><ul class="navList"><li class="navListItem closed item4"><a href="/curricular/cs/resources/application/">Student Employment</a></li><li class="navListItem open item5"><a href="/curricular/cs/resources/source/">Programming Resources and Tools</a><ul class="navList"><li class="navListItem closed item5"><a href="/curricular/cs/resources/source/mini_courses/">CS Mini Courses</a></li><li class="navListItem closed item6"><a href="/curricular/cs/resources/source/introcpp/">Compiling in Linux</a></li><li class="navListItem closed item7"><a href="/curricular/cs/resources/source/makefiles/">Makefiles</a></li><li class="navListItem open current item8"><strong>Keyboard Interrupts</strong></li><li class="navListItem closed item9"><a href="/curricular/cs/resources/source/bg_progs/">Running programs in the background</a></li><li class="navListItem closed item10"><a href="/curricular/cs/resources/source/javascanner/">Scanner class</a></li><li class="navListItem closed item11 jump"><a href="http://www.mathcs.carleton.edu/courses/course_resources/j2se-1.5.0-docs/index.html">Java Documentation</a></li><li class="navListItem closed item12"><a href="/curricular/cs/resources/source/java_classpath_variable/">Setting your Java CLASSPATH variable</a></li><li class="navListItem closed item13"><a href="/curricular/cs/resources/source/java_install/">Installing Java 1.6 on your home computer</a></li><li class="navListItem closed item14"><a href="/curricular/cs/resources/source/python_install/">Installing Python 2.x On Your Home Computer</a></li><li class="navListItem closed item15"><a href="/curricular/cs/resources/source/Python_26/">Installing Python 3.0 on your home computer</a></li><li class="navListItem closed item16"><a href="/curricular/cs/resources/source/cygwin_howto/">Installing Cygwin</a></li><li class="navListItem closed item17"><a href="/curricular/cs/resources/source/tex/">TeX and LaTeX</a></li></ul></li><li class="navListItem closed item6"><a href="/curricular/cs/resources/hsp/">Homework Submission</a></li><li class="navListItem closed item7"><a href="/curricular/cs/resources/labs/">Labs</a></li><li class="navListItem closed item8"><a href="/curricular/cs/resources/cs_lab_assistant_resources/">CS Lab Assistant Resources</a></li><li class="navListItem closed item9"><a href="/curricular/cs/resources/libe/">Periodicals</a></li><li class="navListItem closed item10"><a href="/curricular/cs/resources/links/">Links</a></li><li class="navListItem closed item11"><a href="/curricular/cs/resources/graderguidelines/">Grader Guidelines</a></li><li class="navListItem closed item12 jump"><a href="http://www.cs.carleton.edu/courses/course_resources/Unix2/">UNIX Tutorial for Beginners</a></li><li class="navListItem closed item13 jump"><a href="http://cs.carleton.edu/faculty/jondich/courses/python/">Transition to Python from Another Programming Language</a></li></ul></li><li class="navListItem closed item5"><a href="/curricular/cs/events/">Events</a></li><li class="navListItem closed item6"><a href="/curricular/cs/news/">Newsletter</a></li><li class="navListItem closed item7"><a href="/curricular/cs/students/">Students</a></li><li class="navListItem closed item8 jump"><a href="http://www.mathcs.carleton.edu/cs_comps">Computer Science Comps</a></li><li class="navListItem closed item9"><a href="/curricular/cs/summerresearch/">Summer Research Opportunities</a></li><li class="navListItem closed item10"><a href="/curricular/cs/CS_Career_Resources/">Career Resources</a></li><li class="navListItem closed item11"><a href="/curricular/cs/newstudents/">Guide for New Students</a></li></ul></li></ul>
</div></div>

</div>


<p class="textOnlyLink smallText"><a href="?textonly=1"><span class="textOnly">Text Only/<span class="tiny"> </span>Printer-Friendly</span></a></p>


<div class="navigationSpacer"><img src="/reason_package/reason_4.0/www/ui_images/stp.gif" width="150" height="2" alt="" /></div>
</td>
<td valign="top" class="contentTD">
<div class="content"><a name="content"></a>
<div class="contentHead">


<h2 class="pageTitle"><span>Linux Keyboard Interrupts for Pascal, C, and C++</span></h2>

</div>
<div class="contentMain">


<div id="pageContent"><h3>Example program: <a href="/curricular/cs/assets/ttyio_test.cpp">ttyio_test.cpp</a></h3>
<pre>
/*<br />    <a href="/curricular/cs/assets/ttyio_test.cpp">ttyio_test.cpp</a>:   a simple program that tests the locally written<br />        ttyiofunction library.  For more information about the<br />        Carleton ttyiofunction library contact mtie@carleton.edu.<br />        For information about how to build your own ttyiofunctions<br />        refer to the book<br /><br />            "Advanced C Programming for Displays"<br />                by<br />            Marc J. Rochkind<br /><br />    to compile ttyio_test.cpp:<br />        g++ -o ttyio_test <a href="/curricular/cs/assets/ttyio_test.cpp">ttyio_test.cpp</a> -lttyiofunctions<br /><br />    -mtie 3/27/01<br />*/<br /><br />#include &lt;ttyiofunctions.h&gt;<br />#include &lt;iostream.h&gt;<br /><br />void main()<br />{<br />    char c='z';<br /><br />    //initializes the screen and sets it up to break<br />    inittty();<br />    ttycbreak();<br /><br />    while(c != 'q')  //this is the event loop<br />    {<br />        //if there is a keypress<br />        if( kbhit() )<br />        {<br />            //grab the character<br />            cin &gt;&gt; c;<br /><br />            //display the character<br />            cout &lt;&lt; "the character entered was -" &lt;&lt; c &lt;&lt; "-"&lt;&lt; endl;<br />        }<br />    }<br /><br />    //restore the terminal to normal mode<br />    ttynorm();<br />}
</pre>

<h3>Functions</h3>
<p>int <strong>inittty</strong>(void)</p>
<ul>
<li>This function must be called before any other function in the ttyio library can be used. It determines which terminal IO is to be associated with. inittty returns 1 on success and 0 on failure, with an error message on stderr.</li></ul>
<p>int <strong>ttycbreak</strong>(void)</p>
<ul>
<li>This function sets the terminal (determined by inittty above) to cbreak mode and prevents automatic echoing of characters received from the keyboard. This allows other functions (such as getch() and kbhit() ) to do their work character-by-character, without the need for carriage-returns in between. This function also sets things up so that a call to read will not wait forever for user input, but rather will return immediately whether there has been keyboard activity or not.</li></ul>
<p>int <strong>ttynorm</strong>(void)</p>
<ul>
<li>This function restores the original terminal settings. It should *definitely* be called before your program exits, or you may notice odd behavior of your terminal (For example, you will not see letters you type. If this happens, simply press enter twice, then type the single word "reset", then press enter again. Your terminal should then behave normally.).</li></ul>
<p>int <strong>kbhit</strong>(void)</p>
<ul>
<li>This function returns 1 if there are character(s) in the terminalâ€™s input queue, otherwise if returns 0. It does not remove any characters from the queue. For Pascal programmers, kbhit returns a boolean.</li></ul>
<p>char <strong>getch</strong>(void)</p>
<ul>
<li>This function attempts to read one character from the terminal's input buffer. It will return the first character in the queue if any characters are present at all, otherwise it will return a null character.</li></ul>
<p><em>Note: After ttycbreak is called, white space characters such as Tab, Enter, Esc, Space, and Shift can and will mess up your program. Warn the users not to use those keys!</em></p>
<p><em>Note to Pascal programmers: initty, ttycbreak, and ttynorm are NOT declared as functions in the gpc library. Treat them as procedures.</em></p>
<p><em>Note: ttyiofunctions is a locally written library for use by Carleton College students and staff. It is unsupported, and not available outside of Carleton College.</em></p></div>

</div>
<div class="contentPost">


<ul class="siblingList">
<li><a href="../mini_courses/">CS Mini Courses</a></li>
<li><a href="../introcpp/">Compiling in Linux</a></li>
<li><a href="../beep_prog/">Beep Program</a></li>
<li><a href="../makefiles/">Makefiles</a></li>
<li><strong>Keyboard Interrupts</strong></li>
<li><a href="../bg_progs/">Running programs in the background</a></li>
<li><a href="../javascanner/">Scanner class</a></li>
<li><a href="http://www.mathcs.carleton.edu/courses/course_resources/j2se-1.5.0-docs/index.html">Java Documentation</a></li>
<li><a href="../java_classpath_variable/">Setting your Java CLASSPATH variable</a></li>
<li><a href="../java_install/">Installing Java 1.6 on your home computer</a></li>
<li><a href="../python_install/">Installing Python 2.x On Your Home Computer</a></li>
<li><a href="../PILinstallation/">PIL (Python Imaging Library) for Python 2.x</a></li>
<li><a href="../Python_26/">Installing Python 3.0 on your home computer</a></li>
<li><a href="../cygwin_howto/">Installing Cygwin</a></li>
<li><a href="../tex/">TeX and LaTeX</a></li>
</ul>


</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="footer" class="maintained">


<div id="maintained">
<div id="maintainer">Computer Science pages maintained by <a href="mailto:sjandro@carleton.edu">Sue Jandro</a></div><div id="lastUpdated">This page was last updated on 9 September 2004</div></div>




<p id="footerLoginLink"><a href="https://apps.carleton.edu/login/">Login</a></p>

</div>
</div>
</body>
</html>
